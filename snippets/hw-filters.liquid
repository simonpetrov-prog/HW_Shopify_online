{%- comment -%}
HW FILTER PANEL – für /collections / Produkte
{%- endcomment -%}

<div class="hw-filter-box">
  <div class="hw-filter-head">
    <h2>Filter</h2>
    <button type="button" class="hw-filter-reset" data-filter-reset>Zurücksetzen</button>
  </div>

  
  <div class="hw-filter-tabs">
    <button type="button" class="hw-tab is-active" data-panel-target="price">Preis ▾</button>
    <button type="button" class="hw-tab" data-panel-target="color">Farbe ▾</button>
    <button type="button" class="hw-tab" data-panel-target="brand">Marke ▾</button>
    <button type="button" class="hw-tab" data-panel-target="series">TH ▾</button>
  </div>

  <!-- Panels -->
  <div class="hw-filter-panels">

    {# --- Preis --- #}
    <div class="hw-panel hw-panel--price is-open" data-panel="price">
      <div class="hw-price-row">
        <label>von</label>
        <input type="number" name="min_price" step="0.01" min="0" placeholder="z. B. 2,99">
      </div>
      <div class="hw-price-row">
        <label>bis</label>
        <input type="number" name="max_price" step="0.01" min="0" placeholder="z. B. 9,99">
      </div>
      <button type="button" class="hw-filter-apply" data-filter-apply>Filter anwenden</button>
    </div>

    {# --- Farbe --- #}
    <div class="hw-panel" data-panel="color">
      <div class="hw-chip-list">
        {% assign colors = 'Blau, Rot, Orange, Schwarz, Weiß, Grau, Türkis' | split: ', ' %}
        {% for c in colors %}
          <label class="hw-chip">
            <input type="checkbox" name="color" value="{{ c }}">
            <span class="dot"></span>
            {{ c }}
          </label>
        {% endfor %}
      </div>
    </div>

    {# --- Marke (Auto-Marken) --- #}
    <div class="hw-panel" data-panel="brand">
      <div class="hw-chip-list">
        {% assign brands = 'Ferrari, Porsche, Lamborghini, BMW, Mercedes, Toyota, Koenigsegg' | split: ', ' %}
        {% for b in brands %}
          <label class="hw-chip">
            <input type="checkbox" name="brand" value="{{ b }}">
            {{ b }}
          </label>
        {% endfor %}
      </div>
    </div>

    {# --- Treasure Hunt / Serie --- #}
    <div class="hw-panel" data-panel="series">
      <div class="hw-chip-list">
        <label class="hw-chip">
          <input type="radio" name="th" value="ja">
          JA
        </label>
        <label class="hw-chip">
          <input type="radio" name="th" value="nein">
          Ohne
        </label>
      </div>
    </div>

  </div>
</div>

<style>
/* Box */
.hw-filter-box{
  border:3px solid #0046BE;
  border-radius:16px;
  background:#fff;
  padding:14px 16px 18px;
  margin-bottom:18px;
}

/* Kopf */
.hw-filter-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:12px;
}
.hw-filter-head h2{
  font-size:20px;
  font-weight:800;
  color:#0046BE;
  margin:0;
}
.hw-filter-reset{
  background:#eee;
  border:0;
  border-radius:999px;
  padding:6px 14px;
  font-weight:600;
  cursor:pointer;
}

/* Tabs */
.hw-filter-tabs{
  display:flex;
  gap:8px;
  margin-bottom:12px;
  flex-wrap:wrap;
}
.hw-tab{
  background:#fff;
  border:1px solid #d1d5db;
  border-radius:999px;
  padding:6px 14px;
  font-weight:600;
  cursor:pointer;
}
.hw-tab.is-active{
  background:#0046BE;
  color:#fff;
  border-color:#0046BE;
}

/* Panels */
.hw-filter-panels{
  display:block;
}
.hw-panel{
  display:none;
}
.hw-panel.is-open{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:flex-end;
}

/* PREIS-PANEL */
.hw-panel--price{
  align-items:flex-end;
}
.hw-price-row{
  display:flex;
  flex-direction:column;
  gap:4px;
}
.hw-price-row label{
  font-weight:600;
}
.hw-price-row input{
  width:120px;
  max-width:120px;
  border:1px solid #d1d5db;
  border-radius:10px;
  padding:6px 8px;
  font-size:14px;
}
.hw-filter-apply{
  background:#FF6B00;
  border:0;
  border-radius:10px;
  padding:8px 16px;
  color:#fff;
  font-weight:700;
  cursor:pointer;
}

/* Chips */
.hw-chip-list{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.hw-chip{
  display:inline-flex;
  align-items:center;
  gap:6px;
  background:#eee;
  border:1px solid #ddd;
  border-radius:999px;
  padding:6px 12px;
  font-weight:600;
  cursor:pointer;
}
.hw-chip input{ display:none; }
.hw-chip .dot{
  width:14px;
  height:14px;
  border-radius:999px;
  background:#ddd;
  display:inline-block;
}
.hw-chip.is-checked,
.hw-chip input:checked + .dot,
.hw-chip input:checked ~ span{
  background:#0046BE;
  color:#fff;
  border-color:#0046BE;
}

/* Mobile */
@media (max-width: 700px){
  .hw-panel.is-open{
    flex-direction:column;
    align-items:flex-start;
  }
  .hw-price-row input{
    width:160px;
    max-width:160px;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function(){
  // Tabs umschalten
  document.querySelectorAll('.hw-tab').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const target = btn.getAttribute('data-panel-target');
      // tabs
      document.querySelectorAll('.hw-tab').forEach(t=>t.classList.remove('is-active'));
      btn.classList.add('is-active');
      // panels
      document.querySelectorAll('.hw-panel').forEach(p=>p.classList.remove('is-open'));
      const active = document.querySelector('.hw-panel[data-panel="'+target+'"]');
      if (active) active.classList.add('is-open');
    });
  });

  // Reset
  const resetBtn = document.querySelector('[data-filter-reset]');
  if (resetBtn){
    resetBtn.addEventListener('click', ()=>{
      document.querySelectorAll('.hw-filter-box input[type="checkbox"], .hw-filter-box input[type="radio"]').forEach(i=>i.checked=false);
      document.querySelectorAll('.hw-filter-box input[type="number"]').forEach(i=>i.value='');
    });
  }
});
</script>
