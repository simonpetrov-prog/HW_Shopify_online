<div class="hw-filter-wrapper">

  <!-- Tabs oben -->
  <div class="hw-filter-tabs">
    <button data-tab="color" class="hw-tab active">Farbe</button>
    <button data-tab="brand" class="hw-tab">Marke</button>
    <button data-tab="rare" class="hw-tab">Seltenheit</button>
    <button data-tab="price" class="hw-tab">Preis</button>
  </div>

  <!-- Inhalt Farbe -->
  <div class="hw-filter-group" data-filter="color" data-panel>
    {% assign colors = "Rot,Blau,Orange,Schwarz,Weiß,Grau,Grün,Gelb,Lila,Pink" | split: "," %}
    {% for c in colors %}
      <label class="hw-chip">
        <input type="checkbox" value="{{ c }}">
        {{ c }}
      </label>
    {% endfor %}
  </div>

  <!-- Inhalt Marke -->
  <div class="hw-filter-group" data-filter="brand" data-panel hidden>
    {% assign brands = "Porsche,BMW,Mercedes,Ferrari,Audi,Toyota,Lamborghini,McLaren,Koenigsegg" | split: "," %}
    {% for b in brands %}
      <label class="hw-chip">
        <input type="checkbox" value="{{ b }}">
        {{ b }}
      </label>
    {% endfor %}
  </div>

  <!-- Inhalt Seltenheit -->
  <div class="hw-filter-group" data-filter="rare" data-panel hidden>
    {% assign rares = "TH,STH" | split: "," %}
    {% for r in rares %}
      <label class="hw-chip">
        <input type="checkbox" value="{{ r }}">
        {{ r }}
      </label>
    {% endfor %}
  </div>

  <!-- Inhalt Preis -->
  <div class="hw-filter-group" data-filter="price" data-panel hidden>
    <div class="hw-price-row">
      <input id="price-min" type="number" placeholder="Min €" min="0">
      <span>-</span>
      <input id="price-max" type="number" placeholder="Max €" min="0">
    </div>
  </div>

  <!-- Buttons unten -->
  <div class="hw-filter-actions">
    <button class="hw-apply">Filter anwenden</button>
    <button class="hw-reset">Zurücksetzen</button>
  </div>
</div>

<style>
.hw-filter-wrapper{
  padding:14px;
  border:2px solid var(--primary);
  border-radius:14px;
  background:white;
  margin-bottom:20px;
}

.hw-filter-tabs{
  display:flex;
  gap:8px;
  margin-bottom:14px;
}

.hw-tab{
  padding:8px 14px;
  border-radius:8px;
  background:#eee;
  border:1px solid #ddd;
  cursor:pointer;
  font-weight:700;
}

.hw-tab.active{
  background:var(--primary);
  color:white;
}

.hw-chip{
  display:inline-flex;
  align-items:center;
  padding:6px 12px;
  border:1px solid #ddd;
  margin:4px;
  border-radius:8px;
  cursor:pointer;
  background:#f1f1f1;
  font-weight:600;
}

.hw-chip.active{
  background:var(--primary);
  color:white;
  border-color:var(--primary);
}

.hw-chip input{
  display:none;
}

.hw-price-row{
  display:flex;
  gap:8px;
  align-items:center;
}

.hw-price-row input{
  width:100%;
  padding:8px;
  border-radius:8px;
  border:1px solid #ccc;
}

.hw-filter-actions{
  margin-top:16px;
  display:flex;
  justify-content:space-between;
}

.hw-apply{
  background:var(--primary);
  color:white;
  border:none;
  padding:10px 16px;
  border-radius:10px;
  font-weight:700;
}

.hw-reset{
  background:white;
  border:2px solid var(--primary);
  padding:10px 16px;
  border-radius:10px;
  font-weight:700;
  color:var(--primary);
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {

  /* Tabs */
  document.querySelectorAll(".hw-tab").forEach(tab=>{
    tab.addEventListener("click", () => {
      document.querySelectorAll(".hw-tab").forEach(t=>t.classList.remove("active"));
      tab.classList.add("active");

      document.querySelectorAll("[data-panel]").forEach(p=>p.hidden = true);
      document.querySelector(`[data-filter="${tab.dataset.tab}"]`).hidden = false;
    });
  });

  /* Chip Toggle */
  document.querySelectorAll(".hw-chip").forEach(chip=>{
    const input = chip.querySelector("input");
    chip.addEventListener("click", () => {
      input.checked = !input.checked;
      chip.classList.toggle("active", input.checked);
    });
  });

  /* Filter anwenden */
  const applyBtn = document.querySelector(".hw-apply");
  applyBtn.addEventListener("click", () => {
    const params = new URLSearchParams();

    document.querySelectorAll(".hw-filter-group").forEach(group=>{
      const key = group.dataset.filter;
      const checked = [...group.querySelectorAll("input:checked")].map(x=>x.value);
      if(checked.length) params.append(key, checked.join(","));
    });

    const min = document.getElementById("price-min").value;
    const max = document.getElementById("price-max").value;
    if(min) params.append("min", min);
    if(max) params.append("max", max);

    const url = window.location.pathname + "?" + params.toString();
    window.location = url;
  });

  /* Reset */
  document.querySelector(".hw-reset").addEventListener("click", ()=>{
    window.location = window.location.pathname;
  });
});
</script>
