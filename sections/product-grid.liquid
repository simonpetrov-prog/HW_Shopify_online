{% assign per_page = section.settings.per_page %}
{% paginate collection.products by per_page %}
  <div class="grid">
    {% for product in collection.products %}
      <article class="product product-card">
        <a href="{{ product.url }}">
          {% render 'product-badges', product: product %}
          <img src="{{ product.featured_image | img_url: '400x400' }}" alt="{{ product.title }}">
          <h3>{{ product.title }}</h3>
          <p>
            {% if product.compare_at_price > product.price %}
              <span style="text-decoration:line-through;color:#999;margin-right:6px;">{{ product.compare_at_price | money }}</span>
            {% endif %}
            <strong>{{ product.price | money }}</strong>
          </p>
        </a>
      </article>
    {% else %}
      <p>Keine Produkte in dieser Kollektion.</p>
    {% endfor %}
  </div>

  {% if paginate.pages > 1 %}
    <nav class="pagination" role="navigation" aria-label="Pagination">
      {% if paginate.previous %}<a class="btn-outline" href="{{ paginate.previous.url }}">Zur√ºck</a>{% endif %}
      <span>Seite {{ paginate.current_page }} / {{ paginate.pages }}</span>
      {% if paginate.next %}<a class="btn" href="{{ paginate.next.url }}">Weiter</a>{% endif %}
    </nav>
  {% endif %}
{% endpaginate %}

<style>
.grid { display:grid; gap: 20px; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin: 20px 0 40px; }
.product { text-align: center; border:1px solid var(--border); padding:12px; border-radius:10px; background:#fff; }
.product img { width: 100%; border-radius: 8px; }
.product h3 { margin-top: 10px; font-size: 1rem; color: var(--text); }
.product p { color:#333; font-weight: 500; }
.pagination { display:flex; gap:16px; align-items:center; justify-content:center; }
.product{
  text-align:center; border:1px solid var(--border); padding:12px; border-radius:10px; background:#fff;
  transition: transform .12s ease, box-shadow .12s ease;
}
.product:hover{ transform: translateY(-2px); box-shadow: 0 6px 18px rgba(0,0,0,.06); }
</style>

{% schema %}
{
  "name": "Produkt-Grid",
  "settings": [
    { "type": "range", "id": "per_page", "label": "Produkte pro Seite", "min": 4, "max": 48, "step": 4, "default": 12 }
  ]
}
{% endschema %}
