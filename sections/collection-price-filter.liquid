{% comment %}
Preisfilter per URL: ?min_price=3&max_price=15 (Euro)
- Bewahrt aktuelle Sortierung (?sort_by=…) automatisch
- Bewahrt aktive Tags, weil action="{{ collection.url }}" (Tags liegen im Pfad)
{% endcomment %}

{% assign current_min = request.params.min_price %}
{% assign current_max = request.params.max_price %}
{% assign current_sort = request.params.sort_by | default: collection.sort_by %}

<form class="pricebar" method="get" action="{{ collection.url }}">
  <div class="pricebar__group">
    <label for="min_price">Preis von</label>
    <input id="min_price" name="min_price" type="number" step="0.01" min="0" inputmode="decimal" placeholder="z. B. 3"
           value="{{ current_min }}">
  </div>

  <div class="pricebar__group">
    <label for="max_price">bis</label>
    <input id="max_price" name="max_price" type="number" step="0.01" min="0" inputmode="decimal" placeholder="z. B. 20"
           value="{{ current_max }}">
  </div>

  {% if current_sort %}
    <input type="hidden" name="sort_by" value="{{ current_sort }}">
  {% endif %}

  <button class="btn" type="submit">Filter anwenden</button>
  {% if current_min or current_max %}
    <a class="btn-outline" href="{{ collection.url }}{% if current_sort %}?sort_by={{ current_sort }}{% endif %}">Zurücksetzen</a>
  {% endif %}
</form>

<style>
.pricebar{
  display:flex; gap:12px; align-items:flex-end; flex-wrap:wrap;
  padding: 8px 0 16px; border-bottom:1px solid var(--border); margin-bottom:16px;
}
.pricebar__group{ display:flex; flex-direction:column; gap:6px; }
.pricebar input{
  border:1px solid var(--border); border-radius:8px; padding:8px 10px; background:#fff; width:130px;
}
</style>

{% schema %}{ "name":"Preisfilter (min/max)", "settings":[] }{% endschema %}
