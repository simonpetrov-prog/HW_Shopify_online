<header class="header">
  <div class="header__inner">
    {%- comment -%} Logo {%- endcomment -%}
    <a href="/" class="header__logo">
      {% if section.settings.logo %}
        <img
          src="{{ section.settings.logo | image_url: width: 200 }}"
          alt="{{ shop.name }}"
          loading="lazy"
        >
      {% else %}
        <span class="logo-text">{{ shop.name }}</span>
      {% endif %}
    </a>

    {%- comment -%} Navigation: Startseite / Produkte {%- endcomment -%}
    <nav class="header__nav">
      <a href="/"
         class="nav__link{% if template == 'index' %} is-active{% endif %}">
        Startseite
      </a>
      <a href="/collections/all"
         class="nav__link{% if template contains 'collection' %} is-active{% endif %}">
        Produkte
      </a>
    </nav>

    {%- comment -%} Suche {%- endcomment -%}
    <form class="hw-inline-search"
          action="/search"
          method="get"
          role="search"
          aria-label="Shop-Suche">
      <input
        class="hw-inline-search__input"
        type="search"
        name="q"
        placeholder="Suche nach Modellen, Marken…"
        autocomplete="off"
        aria-label="Suche"
        value="{{ search.terms | escape }}"
      >
      <button class="hw-inline-search__btn" type="submit">
        Suchen
      </button>
    </form>

    {%- comment -%} Warenkorb-Button (öffnet Drawer via data-cart-toggle) {%- endcomment -%}
    <button
      type="button"
      class="cart-btn"
      data-cart-toggle
      aria-label="Warenkorb öffnen">
      <span class="cart-btn__text">Warenkorb</span>
      <span class="cart-badge{% if cart.item_count == 0 %} is-hidden{% endif %}"
            data-cart-count>
        {{ cart.item_count }}
      </span>
    </button>
  </div>
</header>

<!-- Mobile Burger (rechts neben Warenkorb) -->
<button class="header-burger" id="burger-btn" aria-label="Menü öffnen">
  <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <line x1="3" y1="6" x2="21" y2="6"/>
    <line x1="3" y1="12" x2="21" y2="12"/>
    <line x1="3" y1="18" x2="21" y2="18"/>
  </svg>
</button>

<style>
:root{
  --primary:#0046BE;
  --accent:#FF6B00;
  --text:#111111;
  --border:#e5e5e5;
  --bg:#ffffff;
}

/* Header-Grundlayout */
.header{
  position:sticky;
  top:0;
  z-index:30;
  background:#fff;
  border-bottom:1px solid var(--border);
  transition:box-shadow .2s ease;
}
.header.is-scrolled{
  box-shadow:0 6px 22px rgba(0,0,0,.08);
}

.header__inner{
  max-width:1200px;
  margin:0 auto;
  padding:8px 12px;
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:nowrap; /* alles in EINER Zeile halten */
}

/* Logo */
.header__logo{
  flex:0 0 auto;
}
.header__logo img{
  display:block;
  max-height:34px;
  max-width:110px;
  width:auto;
  height:auto;
}

/* Tabs Startseite / Produkte */
.header__nav{
  display:flex;
  align-items:center;
  gap:8px;
  flex:0 0 auto;
}
.nav__link{
  padding:6px 14px;
  border-radius:999px;
  font-weight:800;
  font-size:14px;
  color:var(--text);
  position:relative;
  cursor:pointer;
  white-space:nowrap;
  background:#f3f4f6;
}
.nav__link:hover{
  background:rgba(0,70,190,.08);
}
.nav__link.is-active{
  background:var(--primary);
  color:#fff;
}
.nav__link.is-active::after{
  content:"";
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  bottom:-4px;
  width:24px;
  height:3px;
  border-radius:2px;
  background:var(--accent);
}

/* Suche in der Mitte */
.hw-inline-search{
  display:flex;
  align-items:center;
  gap:6px;
  flex:0 1 260px;          /* kleiner & flexibler */
  max-width:280px;
}
.hw-inline-search__input{
  flex:1 1 auto;
  border:1px solid var(--border);
  border-radius:999px;
  padding:6px 12px;
  font-size:14px;
  outline:none;
}
.hw-inline-search__input:focus{
  border-color:var(--primary);
  box-shadow:0 0 0 1px rgba(0,70,190,.15);
}
.hw-inline-search__btn{
  border-radius:999px;
  border:0;
  padding:6px 12px;
  font-weight:800;
  background:var(--primary);
  color:#fff;
  cursor:pointer;
  white-space:nowrap;
}
.hw-inline-search__btn:hover{
  filter:brightness(.96);
}

/* Warenkorb-Button rechts */
.cart-btn{
  position:relative;
  display:inline-flex;
  align-items:center;
  gap:8px;
  border-radius:999px;
  padding:6px 12px;
  background:var(--primary);
  color:#fff;
  border:0;
  font-weight:800;
  cursor:pointer;
  white-space:nowrap;
  flex:0 0 auto;
}
.cart-btn:hover{
  filter:brightness(.96);
}
.cart-badge{
  min-width:20px;
  height:20px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  background:#000;
  color:#fff;
  font-size:11px;
  padding:0 5px;
}
.cart-badge.is-hidden{
  display:none;
}

/* ================== Tablet (<= 900px) ================== */
@media (max-width: 900px){
  .header__inner{
    gap:8px;
  }
  .header__logo img{
    max-height:30px;
    max-width:96px;
  }
  .hw-inline-search{
    flex:1 1 180px;
    max-width:220px;
  }
}

/* ================== Handy (<= 640px) ================== */
@media (max-width: 640px){
  .header__inner{
    padding:8px 10px;
    gap:8px;
  }

  .header__logo img{
    max-height:26px;
    max-width:80px;
  }

  /* Tabs auf Handy ausblenden → Burger übernimmt Navigation */
  .header__nav{
    display:none;
  }

  /* Suche etwas breiter, aber eine Zeile */
  .hw-inline-search{
    flex:1 1 auto;
    max-width:none;
  }

  /* Warenkorb kompakter: nur Icon / kurzer Text */
  .cart-btn__text{
    display:none;
  }
}
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    }
  ]
}
{% endschema %}
