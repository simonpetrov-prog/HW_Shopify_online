<header class="header" role="banner">
  <div class="header__inner container">
    <!-- ðŸ”¹ Logo -->
    <div class="header__logo">
      {% if section.settings.logo %}
        <a href="/" class="header__heading-link">
          <img 
  src="{{ section.settings.logo | image_url: width: 240 }}" 
  alt="{{ shop.name }}" 
  class="shop-logo"
/>
        </a>
      {% else %}
        <a href="/" class="header__heading-link">{{ shop.name }}</a>
      {% endif %}
    </div>


    <!-- ðŸ”¹ Navigation -->
    <nav class="header__nav">
      <a href="/" class="nav__link {% if template == 'index' %}is-active{% endif %}">Startseite</a>
      <a href="/collections/all" class="nav__link {% if template contains 'collection' %}is-active{% endif %}">Produkte</a>
    </nav>

    <!-- ðŸ”¹ Suchleiste -->
    <div class="hw-search-wrap">
      <form class="hw-inline-search" action="/search" method="get" role="search" aria-label="Shop-Suche">
        <input
          class="hw-inline-search__input"
          type="search"
          name="q"
          placeholder="Suche nach Modellen, Markenâ€¦"
          autocomplete="off"
          aria-label="Suche"
        >
        <button class="hw-inline-search__btn" type="submit" aria-label="Suchen">Suchen</button>
      </form>
    </div>

    <!-- ðŸ”¹ Warenkorb-Button -->
    <button
      class="cart-btn"
      data-cart-toggle
      aria-label="Warenkorb Ã¶ffnen">
      <span class="cart-btn__text">Warenkorb</span>
      <span class="cart-badge" data-cart-count {% unless cart.item_count > 0 %}hidden{% endunless %}>
        {{ cart.item_count }}
      </span>
    </button>
  </div>
</header>

<style>
/* === HEADER BASE === */
.header {
  position: sticky; top: 0; z-index: 50;
  background: #fff; border-bottom: 1px solid var(--border, #e5e5e5);
  transition: box-shadow .2s ease;
}
.header.is-scrolled { box-shadow: 0 6px 22px rgba(0,0,0,.06); }
.header__inner {
  display: flex; align-items: center; justify-content: space-between;
  gap: 14px; padding: 12px 20px;
}

/* === NAVIGATION === */
.header__nav {
  display: flex; align-items: center; gap: 12px;
}
.nav__link {
  padding: 8px 14px; border-radius: 10px; font-weight: 800; color: #111;
  position: relative; text-decoration: none;
}
.nav__link:hover { background: rgba(0,70,190,.08); color: var(--primary, #0046BE); }
.nav__link.is-active { background: var(--primary, #0046BE); color: #fff; }
.nav__link.is-active::after {
  content: ''; position: absolute; bottom: -6px; left: 0; right: 0;
  height: 3px; border-radius: 2px; background: var(--accent, #FF6B00);
  width: 26px; margin: 0 auto;
}

/* === SEARCH === */
.hw-search-wrap { flex: 1 1 auto; max-width: 400px; }
.hw-inline-search {
  display: flex; align-items: center; gap: 8px;
  width: 100%;
}
.hw-inline-search__input {
  flex: 1; border: 1px solid var(--border,#e5e5e5);
  border-radius: 12px; padding: 9px 12px; font-size: 15px;
}
.hw-inline-search__btn {
  border: 0; border-radius: 12px; padding: 9px 14px;
  background: var(--primary,#0046BE); color: #fff; font-weight: 800; cursor: pointer;
}
.hw-inline-search__btn:hover { background: var(--accent,#FF6B00); }

/* === CART BUTTON === */
.cart-btn {
  display: flex; align-items: center; gap: 10px;
  background: var(--primary,#0046BE); color: #fff;
  border: 0; border-radius: 12px; padding: 9px 14px;
  font-weight: 800; cursor: pointer;
  position: relative;
}
.cart-btn:hover { filter: brightness(.96); }
.cart-badge {
  position: absolute; right: -6px; top: -8px;
  background: var(--accent,#FF6B00); color: #fff;
  border-radius: 999px; padding: 2px 6px;
  font-size: 12px; font-weight: 800; display: inline-flex;
  align-items: center; justify-content: center;
}
.cart-badge[hidden] { display: none !important; }

/* === MOBILE LAYOUT === */
@media (max-width: 768px){
  .header__inner { flex-wrap: wrap; gap: 10px; }
  .header__nav { order: 3; width: 100%; justify-content: center; }
  .hw-search-wrap { order: 2; width: 100%; max-width: 100%; }
  .cart-btn { order: 1; margin-left: auto; }
}

.shop-logo {
  max-height: 60px;
  width: auto;
  object-fit: contain;
}
@media (max-width: 768px){
  .shop-logo {
    max-height: 46px;
  }
}

</style>

<script>
document.addEventListener('scroll',()=>{
  const h=document.querySelector('.header');
  if(h){h.classList.toggle('is-scrolled',window.scrollY>8);}
});
</script>

{% schema %}
{
  "name": "Header",
  "settings": [
    { "type": "image_picker", "id": "logo", "label": "Logo" }
  ]
}
{% endschema %}
