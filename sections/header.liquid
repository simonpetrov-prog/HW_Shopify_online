<header class="hw-header">
  <div class="hw-header__inner">
    <!-- Logo links -->
    <a href="/" class="hw-header__logo">
      {% if section.settings.logo %}
        {{ section.settings.logo | image_url: width: 180 | image_tag: alt: shop.name }}
      {% else %}
        <span class="hw-header__logo-text">{{ shop.name }}</span>
      {% endif %}
    </a>

    <!-- Kleine Suchzeile in der Mitte -->
    <form class="hw-header__search" action="/search" method="get" role="search" aria-label="Shop-Suche">
      <input
        class="hw-header__search-input"
        type="search"
        name="q"
        value="{{ search.terms | escape }}"
        placeholder="Suche nach Modellen, Marken..."
        autocomplete="off"
      >
      <button class="hw-header__search-btn" type="submit">Suchen</button>
    </form>

    <!-- Burger rechts -->
    <button
      class="hw-header__burger"
      type="button"
      aria-label="Menü öffnen"
      aria-expanded="false"
      aria-controls="hw-mobile-nav">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>

  <!-- Menü, das sich über den Burger öffnet -->
  <nav id="hw-mobile-nav" class="hw-header__nav">
    <a href="/" class="hw-nav__link{% if template.name == 'index' %} is-active{% endif %}">Startseite</a>
    <a href="/collections/all" class="hw-nav__link{% if template.name == 'collection' %} is-active{% endif %}">Produkte</a>
    <a href="{{ routes.cart_url }}" class="hw-nav__link">Warenkorb</a>
  </nav>
</header>

<style>
.hw-header{
  position:sticky;
  top:0;
  z-index:40;
  background:#fff;
  border-bottom:1px solid #f1f1f1;
}

/* Grundlayout Header-Zeile */
.hw-header__inner{
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 12px;
}

/* Logo */
.hw-header__logo img{
  max-height:32px;
  width:auto;
  display:block;
}
.hw-header__logo-text{
  font-weight:900;
  font-size:16px;
}

/* Suche in der Mitte – eher klein */
.hw-header__search{
  flex:1;
  display:flex;
  align-items:center;
  gap:6px;
}
.hw-header__search-input{
  flex:1;
  border:1px solid #e5e7eb;
  border-radius:999px;
  padding:6px 10px;
  font-size:13px;
}
.hw-header__search-btn{
  border-radius:999px;
  border:0;
  padding:6px 11px;
  font-size:12px;
  font-weight:800;
  background:var(--accent, #FF6B00);
  color:#fff;
  cursor:pointer;
}
.hw-header__search-btn:hover{
  filter:brightness(.95);
}

/* Burger rechts */
.hw-header__burger{
  margin-left:4px;
  width:34px;
  height:34px;
  border-radius:999px;
  border:1px solid #e5e7eb;
  background:#fff;
  display:inline-flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:4px;
  padding:0;
  cursor:pointer;
}
.hw-header__burger span{
  width:16px;
  height:2px;
  background:#111;
  border-radius:999px;
}

/* Menü unter dem Header (mobile) */
.hw-header__nav{
  display:none;
  padding:8px 12px 10px;
  background:#fff;
  border-top:1px solid #f1f1f1;
}
.hw-nav__link{
  display:inline-block;
  margin-right:8px;
  padding:6px 13px;
  border-radius:999px;
  font-weight:800;
  font-size:14px;
  color:#111;
  background:#f3f4f6;
  text-decoration:none;
}
.hw-nav__link.is-active{
  background:var(--primary, #0046BE);
  color:#fff;
}
.hw-nav__link:hover{
  background:#FFF4EB;
  color:var(--accent, #FF6B00);
}

/* Wenn Burger offen → Menü anzeigen + Burger leicht orange */
.hw-header.is-open #hw-mobile-nav{
  display:block;
}
.hw-header.is-open .hw-header__burger{
  border-color:var(--accent, #FF6B00);
}

/* Desktop: Burger ausblenden, Menü als Leiste anzeigen */
@media (min-width: 900px){
  .hw-header__inner{
    max-width:1200px;
    margin:0 auto;
  }
  .hw-header__search{
    max-width:420px;
  }
  .hw-header__burger{
    display:none;
  }
  .hw-header__nav{
    display:flex !important;
    align-items:center;
    gap:8px;
    padding:6px 12px 10px;
    max-width:1200px;
    margin:0 auto;
  }
}
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    { "type": "image_picker", "id": "logo", "label": "Logo" }
  ]
}
{% endschema %}

<script>
document.addEventListener('DOMContentLoaded', function(){
  var header = document.querySelector('.hw-header');
  var burger = document.querySelector('.hw-header__burger');
  if(!header || !burger) return;

  burger.addEventListener('click', function(){
    var open = header.classList.toggle('is-open');
    burger.setAttribute('aria-expanded', open ? 'true' : 'false');
  });
});
</script>
