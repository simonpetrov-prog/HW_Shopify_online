<header class="hw-header">
  <div class="hw-header__inner">
    <!-- Logo links -->
    <a href="{{ routes.root_url }}" class="hw-header__logo" aria-label="{{ shop.name }}">
      {% if section.settings.logo %}
        <img
          src="{{ section.settings.logo | img_url: '200x' }}"
          alt="{{ shop.name }}"
          loading="lazy"
        >
      {% else %}
        {{ shop.name }}
      {% endif %}
    </a>

    <!-- Suche: Mitte (Mobile & Desktop) -->
    <form
      class="hw-header__search"
      action="/search"
      method="get"
      role="search"
      aria-label="Shop-Suche"
    >
      <input
        class="hw-header__search-input"
        type="search"
        name="q"
        placeholder="Suche nach Modellen, Marken…"
        value="{{ search.terms | escape }}"
      >
      <button class="hw-header__search-btn" type="submit">
        Suchen
      </button>
    </form>

    <!-- Burger (nur Mobile/Tablet) -->
    <button class="hw-header__burger" type="button" aria-label="Menü öffnen">
      <span></span><span></span><span></span>
    </button>

    <!-- Desktop-Navigation -->
    <nav class="hw-header__nav" aria-label="Hauptnavigation">
      <a
        href="{{ routes.root_url }}"
        class="hw-nav__link {% if template.name == 'index' %}is-active{% endif %}"
      >
        Startseite
      </a>
      <a
        href="{{ routes.collections_url }}/all"
        class="hw-nav__link {% if template contains 'collection' %}is-active{% endif %}"
      >
        Produkte
      </a>
    </nav>

    <!-- Desktop-Warenkorb-Button (öffnet Drawer) -->
    <button
      class="cart-btn"
      type="button"
      data-cart-toggle
      aria-label="Warenkorb öffnen"
    >
      <span class="cart-btn__text">Warenkorb</span>
      <span
        class="cart-badge {% if cart.item_count == 0 %}is-hidden{% endif %}"
        data-cart-count
      >
        {{ cart.item_count }}
      </span>
    </button>
  </div>

  <!-- Mobile-Slideout-Menü (Burger öffnet das) -->
  <div class="hw-header__mobile-menu" aria-label="Mobiles Menü">
    <nav class="hw-header__mobile-nav">
      <a
        href="{{ routes.root_url }}"
        class="hw-nav__link {% if template.name == 'index' %}is-active{% endif %}"
      >
        Startseite
      </a>
      <a
        href="{{ routes.collections_url }}/all"
        class="hw-nav__link {% if template contains 'collection' %}is-active{% endif %}"
      >
        Produkte
      </a>

      <!-- Warenkorb-Eintrag im Burger-Menü (öffnet Drawer) -->
      <button
        type="button"
        class="hw-nav__link hw-nav__link--cart"
        data-cart-toggle
      >
        Warenkorb
        <span
          class="cart-badge {% if cart.item_count == 0 %}is-hidden{% endif %}"
          data-cart-count
        >
          {{ cart.item_count }}
        </span>
      </button>
    </nav>
  </div>
</header>

<style>
  .hw-header{
    position:sticky;
    top:0;
    z-index:40;
    background:#fff;
    border-bottom:1px solid var(--border, #e5e5e5);
  }

  .hw-header__inner{
    max-width:1200px;
    margin:0 auto;
    padding:8px 12px;
    display:flex;
    align-items:center;
    gap:8px;
  }

  .hw-header__logo{
    flex:0 0 auto;
  }
  .hw-header__logo img{
    display:block;
    height:32px;
    width:auto;
  }

  /* Suche – sitzt immer in der Mitte */
  .hw-header__search{
    flex:1 1 auto;
    display:flex;
    align-items:center;
    gap:6px;
  }
  .hw-header__search-input{
    flex:1;
    border-radius:999px;
    border:1px solid #ddd;
    padding:9px 14px;
    font-size:14px;
  }
  .hw-header__search-btn{
    border-radius:999px;
    padding:9px 16px;
    border:none;
    background:var(--accent, #FF6B00);
    color:#fff;
    font-weight:700;
    cursor:pointer;
    white-space:nowrap;
  }

  /* Burger (Mobile) */
  .hw-header__burger{
    flex:0 0 auto;
    border:0;
    background:#fff;
    border-radius:8px;
    padding:6px 8px;
    display:inline-flex;
    flex-direction:column;
    gap:4px;
    cursor:pointer;
  }
  .hw-header__burger span{
    width:18px;
    height:2px;
    border-radius:2px;
    background:#111;
  }

  /* Desktop-Navigation ist standardmäßig versteckt (Mobile) */
  .hw-header__nav{
    display:none;
    gap:8px;
    align-items:center;
  }
  .hw-nav__link{
    position:relative;
    padding:6px 14px;
    border-radius:999px;
    font-weight:800;
    color:#111;
    text-decoration:none;
    background:transparent;
    border:none;
    cursor:pointer;
    display:inline-flex;
    align-items:center;
    gap:6px;
  }
  .hw-nav__link:hover{
    background:rgba(0,70,190,.06);
    color:var(--primary, #0046BE);
  }
  .hw-nav__link.is-active{
    background:var(--primary, #0046BE);
    color:#fff;
  }
  .hw-nav__link.is-active::after{
    content:"";
    position:absolute;
    left:20%;
    right:20%;
    bottom:-6px;
    height:3px;
    border-radius:2px;
    background:var(--accent,#FF6B00);
  }

  /* Warenkorb-Badge */
  .cart-btn{
    display:none; /* Mobile: ausgeblendet, Desktop: an */
    align-items:center;
    gap:8px;
    border-radius:999px;
    padding:8px 14px;
    background:var(--primary,#0046BE);
    color:#fff;
    border:0;
    font-weight:800;
    cursor:pointer;
  }
  .cart-badge{
    min-width:20px;
    height:20px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    border-radius:999px;
    background:#000;
    color:#fff;
    font-size:12px;
    padding:0 6px;
  }
  .cart-badge.is-hidden{ display:none; }

  /* Mobile-Slideout-Menü */
  .hw-header__mobile-menu{
    display:none;
    border-top:1px solid #eee;
    background:#fff;
  }
  .hw-header__mobile-menu.is-open{
    display:block;
  }
  .hw-header__mobile-nav{
    max-width:1200px;
    margin:0 auto;
    padding:8px 12px 12px;
    display:flex;
    gap:8px;
  }
  .hw-nav__link--cart{
    background:#f3f4ff;
  }

  /* Desktop Layout */
  @media (min-width: 900px){
    .hw-header__inner{
      padding:8px 16px;
    }

    .hw-header__nav{
      display:flex;
      margin-left:24px;
    }

    .hw-header__search{
      max-width:420px;
      margin:0 24px;
    }

    .cart-btn{
      display:inline-flex;
      margin-left:auto;
    }

    .hw-header__burger,
    .hw-header__mobile-menu{
      display:none !important;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', ()=>{
    const burger = document.querySelector('.hw-header__burger');
    const mobileMenu = document.querySelector('.hw-header__mobile-menu');
    if (!burger || !mobileMenu) return;

    burger.addEventListener('click', ()=>{
      mobileMenu.classList.toggle('is-open');
    });
  });
</script>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    }
  ]
}
{% endschema %}
