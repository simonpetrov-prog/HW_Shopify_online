{% comment %}
  Korrekte Shopify-API:
  - recommendations.products  -> Liste der empfohlenen Produkte
  - recommendations.performed -> true, wenn Abfrage durchgeführt
  - recommendations.products_count -> Anzahl
{% endcomment %}

<section class="container" style="margin:28px auto">
  <h3 style="font-weight:800;margin:0 0 12px">Ähnliche Produkte</h3>

  {% if recommendations.performed and recommendations.products_count > 0 %}
    <div class="grid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:16px">
      {% for p in recommendations.products %}
        <a href="{{ p.url }}" class="product-card" style="border:1px solid #e5e5e5;border-radius:12px;padding:10px;display:block;background:#fff">
          <img src="{{ p.featured_image | image_url: width: 360 }}" alt="{{ p.title | escape }}" style="width:100%;height:160px;object-fit:cover;border-radius:8px;background:#fff">
          <div style="margin-top:8px;font-weight:800">{{ p.title }}</div>
          <div style="color:#111;font-weight:800">{{ p.price | money }}</div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p style="opacity:.7">Keine Empfehlungen verfügbar.</p>
  {% endif %}
</section>

{% schema %}
{
  "name": "Product Recommendations",
  "settings": [
    { "type":"range", "id":"limit", "min":2, "max":8, "step":1, "label":"Max. Anzahl (Hinweis: Shopify steuert die Menge selbst)", "default":4 }
  ]
}
{% endschema %}
