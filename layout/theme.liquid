<!doctype html>
<html lang="de">

<head>
  <meta charset="utf-8">
  <!-- Viewport: kein Zoom, volle Breite, iOS Safe Areas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">

  <title>{{ page_title }} – {{ settings.shop_name | default: shop.name }}</title>

  {{ content_for_header }}
  {{ settings.type_body_font | font_face: font_display: 'swap' }}
{{ settings.type_header_font | font_face: font_display: 'swap' }}
  {{ 'base.css' | asset_url | stylesheet_tag }}

  <!-- Basis-Variablen + Grundstyles (konsolidiert) -->
  <style id="hw-vars">

.hw-bc{display:flex;flex-wrap:wrap;gap:8px;align-items:center;padding:8px 12px;margin:6px 0 10px;border:1px solid #eee;border-radius:10px;background:#fafafa}
.hw-bc__link{color:#0046BE;text-decoration:none;font-weight:700}
.hw-bc__link:hover{color:#FF6B00}
.hw-bc__sep{opacity:.6}
.hw-bc__current{font-weight:800;color:#1f2937}

  :root{
    --font-body: {{ settings.type_body_font.family | default: 'system-ui' }}, {{ settings.type_body_font.fallback_families | default: 'sans-serif' }};
    --font-heading: {{ settings.type_header_font.family | default: 'system-ui' }}, {{ settings.type_header_font.fallback_families | default: 'sans-serif' }};
    --primary:#0046BE;   /* Königsblau */
    --accent:#FF6B00;    /* Orange */
    --text:#111;
    --border:#e5e5e5;
    --bg:#fff;
  }

 html,body{background:var(--bg); color:var(--text); font-family:var(--font-body); }
  h1,h2,h3,h4,.h1,.h2,.h3,.h4{ font-family:var(--font-heading); }
a{color:var(--primary); text-decoration:none;}
  a:hover{color:var(--accent);}

  .container{max-width:1200px;margin:0 auto;padding:0 20px;}
  .product-grid.loading { opacity:.3; transition:.2s; pointer-events:none; }

  /* Buttons */
  .btn,button.btn{
    background:var(--primary); color:#fff; border:0; border-radius:10px;
    padding:10px 16px; font-weight:800; letter-spacing:.2px; cursor:pointer;
    transition:transform .06s ease, filter .12s ease, box-shadow .12s ease;
    box-shadow:0 3px 0 rgba(0,0,0,.12);
  }
  .btn:hover{ filter:brightness(.96); transform:translateY(-1px); }
  .btn:active{ transform:translateY(0); box-shadow:none; }
  .btn--primary{ background:var(--accent); }
  .btn--primary:hover{ filter:brightness(.94); }
  .btn-outline{
    background:transparent; color:var(--primary); border:2px solid var(--primary);
    border-radius:10px; padding:8px 14px; font-weight:800;
  }
  .btn-outline:hover{ background:var(--primary); color:#fff; }

  /* Header / Navigation (polish) */
  .header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border);z-index:30;transition:box-shadow .2s ease;}
  .header.is-scrolled{box-shadow:0 6px 22px rgba(0,0,0,.06);}
  .header__inner{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:12px 20px;}
  .header__nav{display:flex;gap:12px}
  .nav__link{padding:8px 12px;border-radius:999px;font-weight:800;color:#111}
  .nav__link:hover{background:rgba(0,70,190,.08);color:var(--primary)}
  .nav__link.is-active{background:var(--primary);color:#fff;position:relative}
  .nav__link.is-active::after{
    content:'';
    position:absolute;left:50%;transform:translateX(-50%);
    bottom:-8px;height:3px;width:24px;border-radius:2px;background:var(--accent);
  }

  /* Cart Button */
  .cart-btn{display:flex;align-items:center;gap:10px;background:var(--primary);color:#fff;border:0;border-radius:12px;padding:9px 14px;font-weight:800;cursor:pointer}
  .cart-btn:hover{filter:brightness(.96)}
  .cart-badge{min-width:22px;height:22px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;background:#000;color:#fff;font-size:12px;padding:0 6px}

  /* Cards / Grid */
  .product-card,.product{border:1px solid var(--border);border-radius:12px;background:#fff;transition:transform .12s ease,box-shadow .12s ease}
  .product-card:hover,.product:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(0,0,0,.06)}
  .product img{background:#fff;border-radius:8px}

  /* Deal Badge */
  .deal-badge{position:absolute;left:10px;top:10px;background:var(--accent);color:#fff;font-weight:800;padding:4px 8px;border-radius:999px;font-size:12px}

  /* Hero Feinheiten */
  .hero-banner__overlay{background:#000}
  .hero-banner__content h1{color:#fff}
  .hero-banner .sub{color:#fff;opacity:.92}
  @media (max-width: 900px){ .hero-banner{ height:56vh; } }
  @media (max-width: 640px){
    .hero-banner{ height:52vh; }
    .hero-banner__overlay{opacity:.55}
  }

  /* Mobile Header Helper (Logo + Quick Buttons) */
  @media (max-width: 768px){
    .header__heading .header__heading-link { font-size:0; line-height:0; }
    .header__heading .header__heading-link img { height:32px !important; width:auto; display:inline-block; }

    .hw-only-mobile { display:inline-flex !important; }
    .hw-quick{
      display:inline-flex; gap:8px; margin-left:8px; vertical-align:middle;
      flex:0 0 auto; white-space:nowrap;
    }
    .hw-qbtn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:6px 10px; border-radius:999px; background:#eee; color:#1f2937;
      border:1px solid #ddd; font-weight:800; text-decoration:none; flex:0 0 auto; white-space:nowrap;
    }
    .hw-qbtn:active { transform: translateY(1px); }
    .header__inline-menu { flex:0 1 auto; }
    .header__icons { margin-left:auto; gap:8px; }
    nav.header__inline-menu, .header__inline-menu .list-menu {
      overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:none;
    }
    nav.header__inline-menu::-webkit-scrollbar, .header__inline-menu .list-menu::-webkit-scrollbar { display:none; }
  }
  @media (min-width: 769px){
    .hw-only-mobile { display:none !important; }
  }

  /* Filter-Chips (grau) */
  .hw-chip{
    display:inline-flex;align-items:center;gap:8px;
    background:#eee;color:#333;border:1px solid #ddd;border-radius:999px;
    padding:6px 10px;margin:4px 6px 0 0;font-weight:600;cursor:pointer;user-select:none;
  }
  .hw-chip input{ display:none; }
  .hw-chip .dot{ width:14px;height:14px;border-radius:50%;border:1px solid rgba(0,0,0,.2);display:inline-block; }
  .hw-chip.is-checked{background:#e0e0e0;border-color:#cfcfcf;}
  </style>

  <!-- Header Shadow on scroll (einmalig) -->
  <script>
  document.addEventListener('scroll', function(){
    var h=document.querySelector('.header');
    if(!h) return;
    h.classList.toggle('is-scrolled', window.scrollY>8);
  });
  </script>

  <!-- Farb-Checkboxen -> Chips (robust, ohne Arrow-Functions) -->
  <script id="hw-color-chips">
  (function () {
    try {
      function norm(s){
        if(!s) return '';
        try {
          return s.toString().trim().toLowerCase()
            .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
            .replace(/ß/g,'ss');
        } catch(e){
          return s.toString().trim().toLowerCase()
            .replace(/ä/g,'ae').replace(/ö/g,'oe').replace(/ü/g,'ue').replace(/ß/g,'ss');
        }
      }
      var COLOR_MAP = {
        'tuerkis':'#1abc9c','blau':'#1e3a8a','rot':'#e11d48','orange':'#f97316',
        'schwarz':'#111827','weiss':'#ffffff','grau':'#9ca3af','gelb':'#f59e0b',
        'grun':'#16a34a','lila':'#7c3aed','pink':'#db2777'
      };
      var panels = document.querySelectorAll('#filter-color, [data-panel="color"]');
      if (!panels || !panels.length) return;
      for (var p = 0; p < panels.length; p++) {
        var panel = panels[p];
        var labels = panel.querySelectorAll('label');
        for (var i = 0; i < labels.length; i++) {
          var label = labels[i];
          if (label.classList && label.classList.contains('hw-chip')) continue;
          var input = label.querySelector('input[type="checkbox"]');
          if (!input) continue;
          var rawName = (input.value || label.textContent || '').trim();
          var key = norm(rawName).replace(/ä/g,'ae').replace(/ö/g,'oe').replace(/ü/g,'ue');
          var dotColor = COLOR_MAP[key] || '#ddd';

          var dot = document.createElement('span');
          dot.className = 'dot';
          dot.style.width = '14px';
          dot.style.height = '14px';
          dot.style.borderRadius = '50%';
          dot.style.border = '1px solid rgba(0,0,0,.2)';
          dot.style.display = 'inline-block';
          dot.style.background = dotColor;

          // alte Knoten außer input entfernen
          var keep = [input]; var toRemove = [];
          for (var n = 0; n < label.childNodes.length; n++) {
            var node = label.childNodes[n];
            if (keep.indexOf(node) === -1) toRemove.push(node);
          }
          for (var r = 0; r < toRemove.length; r++) {
            if (toRemove[r] && toRemove[r].parentNode === label) label.removeChild(toRemove[r]);
          }
          if (label.classList) label.classList.add('hw-chip');
          label.appendChild(input);
          label.appendChild(dot);
          label.appendChild(document.createTextNode(' ' + rawName));

          var sync = (function(inp, lab){
            return function(){
              if (!lab || !lab.classList) return;
              if (inp.checked) lab.classList.add('is-checked');
              else lab.classList.remove('is-checked');
            };
          })(input, label);
          input.addEventListener('change', sync);
          sync();
        }
      }
    } catch (err) {
      if (console && console.warn) console.warn('HW color chips init failed:', err);
    }
  })();
  </script>

  <!-- Zoom-Blocker / iOS Gesten -->
  <style>
    html, body { overflow-x: hidden; }
    html { -webkit-text-size-adjust: 100%; }
    html, body { touch-action: manipulation; }
  </style>
  <script>
    ['gesturestart','gesturechange','gestureend'].forEach(function(ev){
      document.addEventListener(ev, function(e){ e.preventDefault(); }, { passive:false });
    });
    (function(){
      var lastTouchEnd = 0;
      document.addEventListener('touchend', function(e) {
        var now = Date.now();
        if (now - lastTouchEnd <= 300) { e.preventDefault(); }
        lastTouchEnd = now;
      }, { passive:false });
    })();
  </script>
</head>


  <body>
    {{ content_for_layout }}
  </body>
</html>
