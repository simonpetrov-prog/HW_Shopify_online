{% section 'header' %}

<section class="container">
  <h1 style="margin:20px 0;">{{ collection.title }}</h1>
  {% if collection.description != blank %}
    <p style="color:#555;">{{ collection.description }}</p>
  {% endif %}

  {%- comment -%}
    INLINE TAG-FILTER (statt {% section 'collection-filters' %})
  {%- endcomment -%}
  <details class="filters" {% if current_tags.size > 0 %}open{% endif %}>
    <summary class="filters__toggle">
      Filter anzeigen{% if current_tags.size > 0 %} – aktiv: {{ current_tags | join: ', ' }}{% endif %}
    </summary>

    <form class="filters__form" method="get" action="{{ collection.url }}">
      <div class="chips">
        {%- assign options = "Ferrari,Porsche,3er-Pack,Mainline,Limited,Neu,Sale" | split: "," -%}
        {%- for t in options -%}
          {%- assign tag = t | strip -%}
          {%- assign active = current_tags contains tag -%}
          <label class="chip {% if active %}active{% endif %}">
            <input type="checkbox" name="constraint" value="{{ tag | escape }}" {% if active %}checked{% endif %} hidden>
            <span>{{ tag }}</span>
          </label>
        {%- endfor -%}
      </div>
      <button class="btn-outline" type="submit">Filtern</button>
      {% if current_tags.size > 0 %}
        <a class="btn-outline" href="{{ collection.url }}">Zurücksetzen</a>
      {% endif %}
    </form>
  </details>

  {% section 'header' %}

{% section 'collection-filters' %}
{% section 'collection-price-filter' %}
{% section 'collection-sort' %}
{% section 'product-grid' %}

{% section 'cart-drawer' %}
{% section 'footer' %}

<style>
.filters{ margin:10px 0 18px; border:1px solid var(--border); border-radius:10px; padding:10px; background:#fff; }
.filters__toggle{ cursor:pointer; font-weight:600; }
.filters__form{ margin-top:10px; display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
.chips{ display:flex; gap:10px; flex-wrap:wrap; }
.chip{ border:1px solid var(--border); border-radius:999px; padding:6px 10px; cursor:pointer; user-select:none; }
.chip.active{ border-color:var(--primary); background:var(--primary); color:#fff; }
</style>
